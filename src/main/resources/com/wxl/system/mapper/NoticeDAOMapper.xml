<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.wxl.system.dao.NoticeDAO">

    <!--，根据用户账号，分页查询所有广播消息-->
    <select id="findByPage_Notice" resultType="Notice">
       SELECT
	    *
       FROM
	    sendinfo_tb
       WHERE
	    role = (
		SELECT
			role
		FROM
			user_tb
		WHERE
			account = #{account}
	    )
        limit #{start},#{rows}
    </select>


    <!--查询总条数,针对广播信息-->
    <select id="findTotals_Notice" resultType="Integer">
       SELECT
	    count(snum)
       FROM
	    sendinfo_tb
       WHERE
	    role = (
		SELECT
			role
		FROM
			user_tb
		WHERE
			account = #{account}
	    )
      </select>

     <!--根据消息编号查询消息内容-->
	<select id="findConBySnum" parameterType="String" resultType="String">
		select content from sendinfo_tb where snum=#{snum}
	</select>


</mapper>